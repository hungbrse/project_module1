!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="//d36aba6isifr8u.cloudfront.net/",t(t.s=1068)}({1068:function(e,n,t){"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[684],{77340:function(e,n,t){t.r(n),t.d(n,{EditPrivacySettings:function(){return _}});var r=t(1413),o=t(74165),i=t(93433),u=t(15861),a=t(4942),l=t(29439),c=t(72791),s=t(58914),d=t(61094),m=t(22523),p=t(43432),f=t(50120),x=t(47470),b=t(62033),S=t(97265),v=t(94162),h=t(62812),B=t(61134),g=t(33168),C=t(57689),y=t(53954),E=t(92575),U=t(64923),k=t(85883),j=t(29381),Z=t(69822),L=t(65924),O=t(91933),R=function(e){return e.UNSUBSCRIBE="UNSUBSCRIBE",e.SUBSCRIBE="SUBSCRIBE",e.GLOBAL_UNSUBSCRIBE="GLOBAL_UNSUBSCRIBE",e.GLOBAL_SUBSCRIBE="GLOBAL_SUBSCRIBE",e}({}),I=function(e){return e.EXPORT="EXPORT",e.DELETE="DELETE",e}({}),N=t(80184),_=function(){var e,n,t,_,w=(0,g.$)("Summary",{keyPrefix:"Other"}).t,A=(0,g.$)("Summary",{keyPrefix:"EditPrivacy"}).t,P=(0,C.UO)().campaignId,G=(0,Z.Ly)().config,T=(0,j.s)(P).data,D=(0,O.useQuery)([E.FJ],y.s2),M=D.data,F=D.isLoading,z=D.isFetching,Q=(0,c.useState)([]),X=(0,l.Z)(Q,2),J=X[0],q=X[1],H=(0,c.useState)(""),V=(0,l.Z)(H,2),W=V[0],$=V[1],K=(0,c.useState)([]),Y=(0,l.Z)(K,2),ee=Y[0],ne=Y[1],te=(0,c.useState)(!1),re=(0,l.Z)(te,2),oe=re[0],ie=re[1],ue=(0,O.useMutation)((function(e){return(0,y.ze)(e)})),ae=ue.mutate,le=ue.mutateAsync,ce=ue.isLoading,se=[{value:I.EXPORT,name:A("gdprExportName")},{value:I.DELETE,name:A("gdprDeleteName",{communityName:null==G?void 0:G.communityName})}],de=(e={},(0,a.Z)(e,y.sC.GLOBAL_UNSUBSCRIBE,A("globalUnsubscribedMessage")),(0,a.Z)(e,y.sC.GLOBAL_SUBSCRIBE,A("globalSubscribedMessage")),(0,a.Z)(e,y.sC.UNSUBSCRIBE,A("unsubscribedMessage",{communityName:null==G?void 0:G.communityName})),(0,a.Z)(e,y.sC.SUBSCRIBE,A("subscribedMessage",{communityName:null==G?void 0:G.communityName})),(0,a.Z)(e,y.sC.EXPORT,A("exportMessage")),(0,a.Z)(e,y.sC.DELETE,A("deleteMessage")),e),me=(n={},(0,a.Z)(n,R.UNSUBSCRIBE,{value:R.UNSUBSCRIBE,name:A("unsubscribe",{communityName:null==G?void 0:G.communityName})}),(0,a.Z)(n,R.SUBSCRIBE,{value:R.SUBSCRIBE,name:A("subscribe",{communityName:null==G?void 0:G.communityName})}),(0,a.Z)(n,R.GLOBAL_UNSUBSCRIBE,{value:R.GLOBAL_UNSUBSCRIBE,name:A("globalUnsubscribe")}),(0,a.Z)(n,R.GLOBAL_SUBSCRIBE,{value:R.GLOBAL_SUBSCRIBE,name:A("globalSubscribe")}),n),pe=(0,B.cI)({defaultValues:{gdprFields:[],unsubscribeOption:""}}),fe=pe.handleSubmit,xe=pe.control,be=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(n){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.length){e.next=2;break}return e.abrupt("return",k.E.invalidateQueries({queryKey:E.FJ}));case 2:return t=[],n.forEach((function(e){return t.push(le(e))})),e.prev=4,e.next=7,Promise.all(t);case 7:return(r=e.sent)&&r.length&&r.forEach((function(e){e&&e.data&&n.includes(y.sC.EXPORT)&&$("data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e.data))))})),n.forEach((function(e){ne((function(n){return[].concat((0,i.Z)(n),[de[e]])}))})),e.abrupt("return",k.E.invalidateQueries({queryKey:E.FJ}));case 13:e.prev=13,e.t0=e.catch(4),ie(!0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n){return e.apply(this,arguments)}}(),Se=F||ce||z;return(0,c.useEffect)((function(){M&&function(e){var n=[];e.isSubscribed?n.push(me.UNSUBSCRIBE):n.push(me.SUBSCRIBE),e.isGloballyDeleted?n.push(me.GLOBAL_SUBSCRIBE):n.push(me.GLOBAL_UNSUBSCRIBE),q(n)}(M)}),[M]),(0,N.jsxs)(v.Z,{sx:function(e){var n=e.palette;return{maxWidth:"800px",mx:"auto",boxShadow:"0 4px 8px 0 ".concat(n.mvkGrey.shadow,", 0 6px 20px 0 ").concat(n.mvkGrey.shadow),backgroundColor:"white"}},"data-testid":"edit-privacy-settings",children:[(0,N.jsx)(s.jq,{title:null!==(t=null==T?void 0:T.applicationTitle)&&void 0!==t?t:"",titleFontSize:"20px",elevation:0,imageSrc:null!==(_=null==G?void 0:G.logoSmall)&&void 0!==_?_:"",imageHeigth:"40px",imageWidth:"40px",sx:{backgroundColor:"white",position:"relative",textAlign:"center",color:"mvkBlack.main"},position:"static",breadcrumbs:[(0,N.jsxs)(x.default,{onClick:(0,U.w)("/campaigns/".concat(P,"/summary")),color:"inherit",sx:{fontSize:"14px"},children:["< "," ",w("campaignDetails")]},"2")]}),(0,N.jsxs)(s.PO,{title:A("detailsTitle"),backgroundColor:"mvkBlack.summarySectionHeader",textColor:"white",contentSx:{padding:"15px 30px 20px 30px"},children:[(0,N.jsx)(f.Z,{sx:{padding:"0em 0em .5em 0em",fontSize:"14px",color:L.i.mvkBlack.textColor},children:A("formLabel")}),Se?(0,N.jsx)(s.ww,{}):(0,N.jsxs)("form",{onSubmit:fe((function(e){ne([]),ie(!1),e.unsubscribeOption?ae(e.unsubscribeOption,{onSuccess:function(){ne((function(n){return[].concat((0,i.Z)(n),[de[e.unsubscribeOption]])})),be(e.gdprFields)},onError:function(){return ie(!0)}}):be(e.gdprFields)})),children:[(0,N.jsx)(B.Qr,{control:xe,name:"unsubscribeOption",render:function(e){var n=e.field;return(0,N.jsx)(S.Z,(0,r.Z)((0,r.Z)({},n),{},{children:J.map((function(e,n){var t=e.name,r=e.value;return(0,N.jsx)(p.Z,{id:t,name:r,value:r,control:(0,N.jsx)(b.Z,{icon:(0,N.jsx)(s.$Q,{height:"20px",width:"20px"}),checkedIcon:(0,N.jsx)(s.pE,{height:"20px",width:"20px"}),value:r,name:t}),label:(0,N.jsx)(h.Z,{sx:{fontSize:"14px",color:L.i.mvkBlack.textColor,marginLeft:"3px"},component:"span",children:t})},n)}))}))}}),(null==M?void 0:M.isMember)&&(0,N.jsx)(m.Z,{sx:{marginTop:"14px"},children:(0,N.jsx)(B.Qr,{name:"gdprFields",control:xe,render:function(e){var n=e.field;return(0,N.jsx)(N.Fragment,{children:se.map((function(e){var t=e.name,r=e.value;return(0,N.jsx)(p.Z,{label:(0,N.jsx)(h.Z,{sx:{fontSize:"14px",color:L.i.mvkBlack.textColor},component:"span",children:t}),control:(0,N.jsx)(d.Z,{value:r,checked:n.value.includes(r),onChange:function(e,t){t?n.onChange([].concat((0,i.Z)(n.value),[e.target.value])):n.onChange(n.value.filter((function(n){return n!==e.target.value})))}})},r)}))})}})}),(0,N.jsx)(s.UV,{type:"submit",variant:"community-primary",sx:{backgroundColor:null==G?void 0:G.styles.buttonColor,borderColor:null==G?void 0:G.styles.buttonColor,"&:hover":{backgroundColor:null==G?void 0:G.styles.buttonColorDarker,borderColor:null==G?void 0:G.styles.buttonColorDarker}},children:A("confirm")})]}),ee&&!!ee.length&&ee.map((function(e){return(0,N.jsx)(h.Z,{sx:{fontSize:"15px",color:"#057505"},children:e},e)})),oe&&(0,N.jsxs)(h.Z,{sx:function(e){return{color:e.palette.mvkRed.bright,fontSize:"14px"}},children:[A("thereWasAnError"),(0,N.jsx)(x.default,{href:"mailto:".concat(null==G?void 0:G.helpUrl),sx:{color:"#0000EE"},children:A("contactUs")}),A("forHelp")]}),W&&(0,N.jsx)(x.default,{download:A("exportData"),href:W,sx:{"&:hover":{textDecorationColor:"white"}},children:(0,N.jsx)(s.UV,{sx:{textAlign:"start",textDecoration:"underline",backgroundColor:null==G?void 0:G.styles.buttonColor,borderColor:null==G?void 0:G.styles.buttonColor,"&:hover":{backgroundColor:null==G?void 0:G.styles.buttonColorDarker,borderColor:null==G?void 0:G.styles.buttonColorDarker}},variant:"community-primary",children:A("exportText")})})]})]})}},29381:function(e,n,t){t.d(n,{s:function(){return r.s}});var r=t(7595)},7595:function(e,n,t){t.d(n,{s:function(){return u}});var r=t(91933),o=t(53954),i=t(92575),u=function(e){return(0,r.useQuery)([i.NS,e],(function(){return(0,o.p2)(e)}),{retry:!0})}}}])}});