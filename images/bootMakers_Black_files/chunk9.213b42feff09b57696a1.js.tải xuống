!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="//d36aba6isifr8u.cloudfront.net/",r(r.s=1081)}({1081:function(e,t,r){"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[950],{4950:function(e,t,r){r.d(t,{z:function(){return C}});var n=r(74165),i=r(15861),o=r(29439),a=r(72791),s=r(58914),c=r(50228),u=r(94162),l=r(62812),p=r(33168),f=r(69822),d=r(79593),m=r(99139),v=r(92987),x=r(17880),g=r(1413),y=r(16507),b=r(80184),h=function(e){var t=e.width,r=e.height,n=e.style,i=e.onClick;return(0,b.jsx)(y.Z,{width:t||"24px",height:r||"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:(0,g.Z)({},n),onClick:i,"data-testid":"close-icon",children:(0,b.jsx)("path",{d:"M19.5595 17.4395L14.12 12L19.5595 6.56046C20.1468 5.97319 20.1468 5.02772 19.5595 4.44045C18.9723 3.85318 18.0268 3.85318 17.4395 4.44045L12 9.87999L6.56046 4.44045C5.97319 3.85318 5.02772 3.85318 4.44045 4.44045C3.85318 5.02772 3.85318 5.97319 4.44045 6.56046L9.87999 12L4.44045 17.4395C3.85318 18.0268 3.85318 18.9723 4.44045 19.5595C5.02772 20.1468 5.97319 20.1468 6.56046 19.5595L12 14.12L17.4395 19.5595C18.0268 20.1468 18.9723 20.1468 19.5595 19.5595C20.1427 18.9723 20.1427 18.0226 19.5595 17.4395Z",fill:"black"})})},k=function(e){var t=e.sx,r=e.onDismiss,n=e.resourceURL,i=e.resourceType,s=function(e,t,r){var n=(0,a.useState)(null),i=(0,o.Z)(n,2),s=i[0],c=i[1];return(0,a.useEffect)((function(){switch(e){case d.ev.image:case d.ev.default:c((0,b.jsx)("img",{src:t,alt:t.slice(0,7),style:{margin:"auto",maxWidth:"700px",maxHeight:"700px"},"data-testid":"dismissable-resource"}));break;case d.ev.video:c((0,b.jsx)("video",{src:t,controls:!0,autoPlay:!1,style:{margin:"auto",maxWidth:"700px",maxHeight:"700px"},"data-testid":"dismissable-resource"}));break;case d.ev.image_or_video:r===d.ev.image?c((0,b.jsx)("img",{src:t,alt:t.slice(0,7),style:{width:"100%"},"data-testid":"dismissable-resource"})):c((0,b.jsx)("video",{src:t,controls:!0,autoPlay:!0,style:{width:"100%"},"data-testid":"dismissable-resource"}))}}),[e,r,t]),s}(e.acceptContentType,n,i);return(0,b.jsxs)(c.Z,{sx:(0,g.Z)({width:"100%",display:"flex",position:"relative",marginTop:"14px",zIndex:1,paddingTop:"40px"},t),"data-testid":"dismissable-resource-with-input",children:[(0,b.jsx)(c.Z,{sx:{position:"absolute",top:"10px",right:"10px"},children:(0,b.jsx)(h,{onClick:r,style:{cursor:"pointer"}})}),s]})},w=[s.RR.image,s.RR.video,s.RR.snapchat_story,s.RR.instagram_story],C=function(e){var t=e.acceptContentType,r=e.hasCaptionField,g=void 0===r||r,y=e.initialResourceURL,h=void 0===y?{image:""}:y,C=e.nonDismissableResource,S=void 0!==C&&C,Z=e.networkType,R=e.setFormResourceURL,T=e.setFormCaptionText,E=e.setFormValue,j=e.setUploadError,_=e.setContentType,z=e.setHasUploadedResource,F=(0,a.useState)(null==h?void 0:h.image),L=(0,o.Z)(F,2),U=L[0],O=L[1],D=(0,a.useState)(m.ev.image),P=(0,o.Z)(D,2),M=P[0],B=P[1],V=(0,a.useState)(null==h?void 0:h.title),A=(0,o.Z)(V,2),J=A[0],W=A[1],$=(0,a.useState)(!1),I=(0,o.Z)($,2),H=I[0],G=I[1],K=function(e){var t=(0,a.useState)(null),r=(0,o.Z)(t,2),n=r[0],i=r[1],s=(0,p.$)("SubmitContent",{keyPrefix:"ContentUploadForm"}).t;return{isValidFileSize:(0,a.useCallback)((function(e){var t=e.type.split("/")[0]===m.ev.image?m.wE.image:m.wE.video;return!(e.size>t&&(i({type:d.EJ.fileSizeError,message:"".concat(s("fileTooLargeText"),": ").concat(parseFloat((e.size/1024/1024).toFixed(1)),"MB.")}),1))}),[s]),isValidFileType:(0,a.useCallback)((function(t,r){return t instanceof Blob&&t instanceof File?!!function(e){switch(e){case m.z6.image:return new RegExp(m.z6.image);case m.z6.video:return new RegExp(m.z6.video);case m.z6.image_or_video:return new RegExp("(image|video|x-(?:[0-9A-Za-z!#$%&'*+.^_`|~-]+))/([0-9A-Za-z!#$%&'*+.^_`|~-]+)")}}(r).test(t.type)||(e===m.ev.files?i({type:d.EJ.fileTypeError,message:s("filesError")}):i({type:d.EJ.fileTypeError,message:s("notSupportedFileTypeText")}),!1):(i({type:d.EJ.fileTypeError,message:s("notSupportedFileTypeText")}),!1)}),[s,e]),error:n,setError:i}}(t),q=K.isValidFileSize,N=K.isValidFileType,Q=K.error,X=K.setError,Y=(0,a.useRef)(null),ee=(0,f.Ly)().config,te=function(e){var t=(0,a.useState)(""),r=(0,o.Z)(t,2),n=r[0],i=r[1],s=(0,p.$)("SubmitContent",{keyPrefix:"ContentUploadForm"}).t;return(0,a.useEffect)((function(){switch(e){case m.ev.image:i(s("imageCaption"));break;case m.ev.video:i(s("videoCaption"));break;case m.ev.image_or_video:i(s("imageOrVideoCaption"))}}),[e,s]),n}(t),re=(0,p.$)("SubmitContent",{keyPrefix:"ContentUploadForm"}).t,ne=function(e){var t=(0,a.useState)(m.z6.image),r=(0,o.Z)(t,2),n=r[0],i=r[1];return(0,a.useEffect)((function(){switch(e){case m.ev.image:i(m.z6.image);break;case m.ev.video:i(m.z6.video);break;case m.ev.image_or_video:i(m.z6.image_or_video)}}),[e]),n}(t),ie=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S?(0,v.S)(t,v.zc.file):(0,v.JW)(t)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,x.p)(t,r);case 6:(i=e.sent)&&(O(i.fileUrl),S&&E&&E(i.fileUrl),z&&z(!0)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),o=e.t0.status||e.t0.code||"SERVER_ERROR",X({type:o,message:e.t0.message||"".concat(re("errorOccuredText"),": ").concat(o,".")}),j&&j(!0);case 15:return e.prev=15,G(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,10,15,18]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:if(r=t.target.files[0],B(r.type.split("/")[0]),_&&_(r.type.split("/")[0]),q(r)&&N(r,ne)){e.next=7;break}return e.abrupt("return");case 7:return G(!0),e.next=10,ie(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=w.includes(Z)&&""!==U,se=t===m.ev.image&&!U&&!S,ce=t===m.ev.video&&!U&&!S,ue=(0,a.useCallback)((function(){O(""),W(""),X(null),j&&j(!1)}),[X,j]);(0,a.useEffect)((function(){T&&J&&T(J),R&&R(U)}),[J,U,T,R]),(0,a.useEffect)((function(){h.image&&O(h.image)}),[h]),(0,a.useEffect)((function(){if(j)return j(null!==Q)}),[Q,j]),(0,a.useEffect)((function(){w.includes(Z)&&ue()}),[Z,ue]);var le=t===m.ev.default||t===m.ev.files;return H?(0,b.jsx)(s.ww,{}):(0,b.jsxs)(u.Z,{children:[U&&S&&(0,b.jsx)("img",{src:U,alt:U.slice(0,7),style:{margin:"auto",maxWidth:"700px",maxHeight:"700px"},"data-testid":"dismissable-resource"}),U&&!S&&(0,b.jsx)(k,{resourceURL:U,resourceType:M,onDismiss:ue,acceptContentType:t}),!((Z===s.RR.image||Z===s.RR.video||Z===s.RR.instagram_story)&&!U)&&g&&(0,b.jsx)(c.Z,{sx:{width:"100%",position:"relative",margin:"14px 83px 0px 0px",zIndex:1},children:(0,b.jsx)(s.sp,{label:te,defaultValue:J||"",placeholder:re("caption"),type:"text",onChange:function(e){W&&W(e.target.value)},sx:{width:"100%"}})}),!ae&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("input",{style:{display:"none"},type:"file",accept:ne,ref:Y,onChange:oe}),(0,b.jsx)(s.UV,{variant:m.cT[t],onClick:function(){var e;X(null),null===(e=Y.current)||void 0===e||e.click()},sx:{textDecoration:le?"underline":"none",backgroundColor:le?null==ee?void 0:ee.styles.buttonColor:"none",color:le?"none":null==ee?void 0:ee.styles.buttonColor,borderColor:null==ee?void 0:ee.styles.buttonColor,"&:hover":{textDecoration:le?"underline":"none",backgroundColor:le?null==ee?void 0:ee.styles.buttonColorDark:null==ee?void 0:ee.styles.buttonColor,borderColor:null==ee?void 0:ee.styles.buttonColorDark},marginBottom:"0px"},children:re(m.ev[t])})]}),Q&&t!==m.ev.files&&(0,b.jsx)(s.Sg,{message:Q.message,type:d.FF.error}),Q&&t===m.ev.files&&(0,b.jsx)(l.Z,{sx:function(e){return{fontSize:"14px",color:e.palette.mvkRed.required}},children:Q.message}),se&&(0,b.jsx)(l.Z,{sx:function(e){return{display:"inline-block",textAlign:"center",marginTop:"5px",marginBottom:"30px",color:e.palette.mvkGrey.light,fontStyle:"italic",fontSize:"14px"}},children:"(".concat(re("limitText")," 75MB)")}),ce&&(0,b.jsx)(l.Z,{sx:function(e){return{display:"inline-block",textAlign:"center",marginTop:"5px",marginBottom:"30px",color:e.palette.mvkGrey.light,fontStyle:"italic",fontSize:"14px"}},children:"(".concat(re("limitText")," 500MB)")})]})}},92987:function(e,t,r){r.d(t,{JW:function(){return i},S:function(){return o},zc:function(){return a}});var n=r(10207),i=function(e){var t=(0,n.et)();if(!t)return null;var r=t.facebookExternalId,i=e.name.split("."),o=i[i.length-1];return"".concat(r,"_").concat(Math.floor(1e4*Math.random()),"_").concat((new Date).getTime(),".").concat(o)},o=function(e,t){var r=(new Date).toLocaleDateString().replace(/\//g,"-"),n=t===a.image?"user-content-upload":"file-upload",i=function(e){var t=("string"==typeof e?e:e.name).split(".");return".".concat(t[t.length-1])}(e),o=function(e){var t=("string"==typeof e?e:e.name).split(".");return"".concat(t[0])}(e).replace(/[\s|&;$%@"<>()+,]/g,"");return"".concat(n,"/").concat(o,"_").concat(r).concat(i)},a=function(e){return e.image="image",e.video="video",e.file="file",e}({})},17880:function(e,t,r){r.d(t,{p:function(){return p}});var n=r(1413),i=r(74165),o=r(15861),a=r(92575),s=r(79593),c=r(18135),u=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.m.post(a.CF,{fileName:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t,r){for(var n={key:t,AWSAccessKeyId:r.awsKey,acl:"public-read",policy:r.policy,signature:r.signature,"Content-Type":e.type||"application/octet-stream",file:new Blob([e])},i=new FormData,o=0,c=Object.keys(n);o<c.length;o++){var u=c[o];i.append(u,n[u])}return{url:"".concat(a.yx,"/").concat(r.bucket),method:s.f2.POST,headers:{enctype:"multipart/form-data","Enclosure-type":"multipart/form-data"},body:i}},p=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("auth.profile")&&t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,u(r);case 6:if(a=e.sent){e.next=9;break}throw new Error(r);case 9:o=l(t,r,a),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(3),console.warn("Failed to get file upload policy.",e.t0),e.t0;case 16:if(o&&o.url){e.next=18;break}return e.abrupt("return");case 18:return e.prev=18,e.next=21,fetch(o.url,(0,n.Z)({},o));case 21:if((s=e.sent).ok){e.next=24;break}throw new Error("upload failed");case 24:return s.fileUrl="".concat(o.url,"/").concat(r),e.abrupt("return",s);case 28:throw e.prev=28,e.t1=e.catch(18),console.warn("Failed to upload ".concat(r,"."),e.t1),e.t1;case 32:case"end":return e.stop()}}),e,null,[[3,12],[18,28]])})));return function(t,r){return e.apply(this,arguments)}}()}}])}});