!function(e){var n={};function i(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)i.d(r,t,function(n){return e[n]}.bind(null,t));return r},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="//d36aba6isifr8u.cloudfront.net/",i(i.s=1067)}({1067:function(e,n,i){"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[661],{71825:function(e,n,i){i.d(n,{W:function(){return c}});var r=i(91933),t=i(71319),o=i(92575),c=function(){return(0,r.useQuery)([o.t$],(function(){return(0,t.Z)()}),{staleTime:3e5,keepPreviousData:!0,retry:!0})}},58388:function(e,n,i){i.r(n),i.d(n,{EditDemographicInfo:function(){return N}});var r=i(4942),t=i(1413),o=i(29439),c=i(72791),a=i(80848),u=i(58914),l=i(64561),s=i(25801),d=i(59969),p=i(30035),m=i(17133),h=i(47470),f=i(96746),v=i(69083),g=i(88970),b=i(4567),x=i(2912),y=i(61134),k=i(33168),S=i(91933),G=i(57689),I=i(60874),j=i(92575),D=i(64923),C=i(71825),E=i(73721),O=i(69822),Z=i(72089),P=i(17539),A=i(18981),w=i(29381),z=i(80184),T=function(e){return e.Man="man",e.Woman="woman",e.NonBinary="nonBinary",e.Other="other",e}(T||{}),q=function(e){return e.Required="required",e.EmptyInput="emptyInput",e.Custom="custom",e}(q||{}),N=function(){var e,n,i,N,B,W=(0,k.$)("EditDemographicInfo").t,_=(0,k.$)("Summary",{keyPrefix:"Other"}).t,R=(0,k.$)("EditDemographicInfo",{keyPrefix:"formControls"}).t,L=(0,k.$)("EditDemographicInfo",{keyPrefix:"radioControls"}).t,M=(0,O.Ly)().config,Q=I.z.object({memberSelectedEthnicities:I.z.array(I.z.object({ethnicGroup:I.z.string(),checked:I.z.boolean(),ethnicGroupDescription:I.z.string(),isInput:I.z.boolean().optional()})).refine((function(e){var n,i;return null!==(n=e.filter((function(e){return null==e?void 0:e.checked})))&&void 0!==n&&n.length?null!==(i=e.filter((function(e){var n=e.checked,i=e.isInput,r=e.ethnicGroup,t=e.ethnicGroupDescription;return n&&i&&ee.includes(r)&&!t})))&&void 0!==i&&i.length?(le("memberSelectedEthnicities",{type:q.EmptyInput,message:W(q.EmptyInput,{keyPrefix:"errors"})}),!1):(se("memberSelectedEthnicities"),!0):(le("memberSelectedEthnicities",{type:q.Required,message:W(q.Required,{keyPrefix:"errors"})}),!1)}),{message:W(q.EmptyInput,{keyPrefix:"errors"})}),membershipContactInfo:I.z.object({gender:I.z.string(),genderDescription:I.z.string()}).refine((function(e){var n=e.gender,i=e.genderDescription;return!(Y.includes(n)&&!i)}),{message:W(q.EmptyInput,{keyPrefix:"errors"})})}),$=(0,c.useState)({describe:""}),H=(0,o.Z)($,2),F=H[0],V=H[1],U=(0,G.UO)().campaignId,J=(0,S.useQueryClient)(),K=(0,C.W)().data,X=(0,w.s)(U).data,Y=["describe"],ee=["Other"],ne=P.Z.getAuthProfile()&&(null===(e=JSON.parse(P.Z.getAuthProfile()))||void 0===e?void 0:e.memberSelectedEthnicities),ie={memberSelectedEthnicities:E.G,membershipContactInfo:{gender:"",genderDescription:""}},re=(0,y.cI)({resolver:(0,a.F)(Q),mode:"onChange",defaultValues:ie}),te=re.handleSubmit,oe=re.formState.errors,ce=re.control,ae=re.register,ue=re.watch,le=re.setError,se=re.clearErrors,de=re.reset,pe=(0,y.Dq)({control:ce,name:"memberSelectedEthnicities"}).fields,me=ue("memberSelectedEthnicities"),he=pe.map((function(e,n){return(0,t.Z)((0,t.Z)({},e),me[n])}));(0,c.useEffect)((function(){de({memberSelectedEthnicities:null==ie?void 0:ie.memberSelectedEthnicities.map((function(e){var n=e.ethnicGroup,i=e.ethnicGroupDescription,r=e.isInput,t=function(e){return ne.find((function(n){return n.ethnicGroup===e}))}(R(n));return{ethnicGroup:(null==t?void 0:t.ethnicGroup)||R(n),checked:!!t,ethnicGroupDescription:r?null==t?void 0:t.ethnicGroupDescription:R(i),isInput:r}})),membershipContactInfo:{gender:null==K?void 0:K.gender,genderDescription:null==K?void 0:K.genderDescription}}),K&&Y.includes(null==K?void 0:K.gender)&&V((0,r.Z)({},null==K?void 0:K.gender,null==K?void 0:K.genderDescription))}),[de,R,K]);var fe=[{label:L(T.Man),value:"man",name:"male"},{label:L(T.Woman),value:"woman",name:"female"},{label:L(T.NonBinary),value:"non-binary",name:"non_bin"},{label:(0,z.jsx)(f.Z,{name:"describe"}),value:" ",isInput:!0,name:"describe"},{label:L(T.Other),value:"I prefer not to say",name:"other"}],ve=(0,S.useMutation)((function(e){return(0,A.V)(e)})),ge=(0,D.w)("/campaigns/".concat(U,"/summary")),be=function(e,n){var i,r;return(null==e||null===(i=e.memberSelectedEthnicities)||void 0===i?void 0:i.type)===n?null==e||null===(r=e.memberSelectedEthnicities)||void 0===r?void 0:r.message:""};return(0,z.jsxs)(x.Z,{sx:function(e){var n=e.palette;return{maxWidth:"800px",mx:"auto",boxShadow:"0 4px 8px 0 ".concat(n.mvkGrey.shadow,", 0 6px 20px 0 ").concat(n.mvkGrey.shadow),backgroundColor:"white"}},"data-testid":"edit-demographic-info",children:[(0,z.jsx)(u.jq,{title:(null==X?void 0:X.applicationTitle)||"",titleFontSize:"20px",elevation:0,imageSrc:null!==(n=null==M?void 0:M.logoSmall)&&void 0!==n?n:"",imageHeigth:"60px",imageWidth:"60px",sx:{backgroundColor:"white",position:"relative",textAlign:"center",color:"mvkBlack.main"},position:"static",breadcrumbs:[(0,z.jsxs)(h.default,{onClick:ge,color:"inherit",sx:{fontSize:"14px"},children:["< "," ",_("campaignDetails")]},"2")]}),(0,z.jsx)(u.PO,{title:W("detailsTitle"),backgroundColor:"mvkBlack.summarySectionHeader",textColor:"white",contentSx:{padding:"15px 30px 20px 30px"},children:(0,z.jsx)("form",{onSubmit:te((function(e){ve.mutate({data:{memberSelectedEthnicities:e.memberSelectedEthnicities.reduce((function(e,n){var i=n.ethnicGroup,r=n.ethnicGroupDescription;return n.checked&&e.push({ethnicGroup:i,ethnicGroupDescription:r}),e}),[]),membershipContactInfo:e.membershipContactInfo}},{onSuccess:function(){ge(),J.invalidateQueries({predicate:function(e){var n=e.queryKey;return n[0]==j.t$||n[0]==j.r0}})}})})),children:(0,z.jsxs)(x.Z,{children:[(0,z.jsxs)(m.ZP,{sx:{padding:"0em 0em .5em 0em"},children:[W("genderGroupTitle"),(0,z.jsx)(b.default,{component:"span",color:"mvkRed.required",children:"*"})]}),(0,z.jsx)(y.Qr,{name:"membershipContactInfo",control:ce,render:function(e){var n=e.field;return(0,z.jsx)(g.Z,(0,t.Z)((0,t.Z)({sx:{marginLeft:"5px"}},n),{},{onChange:function(e,i){var r=e.target.name;n.onChange({gender:r,genderDescription:F[r]||i.trim()})},children:fe.map((function(e,i){var t,o=e.name,c=e.value,a=e.isInput;return(0,z.jsx)(s.ZP,{id:o,name:c,value:c,title:W("detailsTitle"),checked:(null==n||null===(t=n.value)||void 0===t?void 0:t.gender)===o,control:(0,z.jsx)(v.Z,{icon:(0,z.jsx)(u.$Q,{height:"20px",width:"20px"}),checkedIcon:(0,z.jsx)(u.pE,{height:"20px",width:"20px"}),value:c,name:o}),label:a?(0,z.jsx)(f.Z,{onChange:function(e){var i,t=e.target,o=t.name,c=t.value;Y.includes(null==n||null===(i=n.value)||void 0===i?void 0:i.gender)&&n.onChange({gender:o,genderDescription:c}),V((0,r.Z)({},o,c))},name:o,value:F[o]}):c},i)}))}))}}),(0,z.jsxs)(m.ZP,{sx:{marginTop:"14px",padding:"0em 0em .5em 0em"},children:[W("ethnicityGroupTitle"),(0,z.jsx)(b.default,{component:"span",color:"mvkRed.required",children:"*"})]}),(0,z.jsx)(d.Z,{sx:{marginLeft:"5px"},children:he.map((function(e,n){var i=e.id,r=e.ethnicGroup,o=e.ethnicGroupDescription,c=e.isInput,a=e.checked;return(0,z.jsx)(s.ZP,{htmlFor:r,title:W("detailsTitle"),checked:Boolean(a),control:(0,z.jsx)(l.Z,(0,t.Z)({id:r},ae("memberSelectedEthnicities.".concat(n,".checked")))),label:c?(0,z.jsx)(f.Z,(0,t.Z)((0,t.Z)({},ae("memberSelectedEthnicities.".concat(n,".ethnicGroupDescription"),{required:!1})),{},{id:r})):o},i)}))}),(0,z.jsx)(p.Z,{sx:{color:"mvkRed.required",fontSize:"1rem"},error:!0,children:be(oe,q.Required)}),(0,z.jsx)(p.Z,{sx:{color:"mvkRed.required",fontStyle:"italic",fontSize:"1rem"},error:!0,children:(null==oe||null===(i=oe.membershipContactInfo)||void 0===i?void 0:i.message)||be(oe,q.Custom)||(null==oe||null===(N=oe.memberSelectedEthnicities)||void 0===N?void 0:N.type)==q.EmptyInput&&(null===(B=oe.memberSelectedEthnicities)||void 0===B?void 0:B.message)}),(0,z.jsx)(u.UV,{disabled:!(0,Z.Q)(oe),type:"submit",variant:"community-primary",sx:{"&:disabled":{color:"white"},backgroundColor:null==M?void 0:M.styles.buttonColor,borderColor:null==M?void 0:M.styles.buttonColor,"&:hover":{backgroundColor:null==M?void 0:M.styles.buttonColorDark,borderColor:null==M?void 0:M.styles.buttonColorDark}},children:W("confirm")})]})})})]})}},29381:function(e,n,i){i.d(n,{s:function(){return r.s}});var r=i(7595)},7595:function(e,n,i){i.d(n,{s:function(){return c}});var r=i(91933),t=i(53954),o=i(92575),c=function(e){return(0,r.useQuery)([o.NS,e],(function(){return(0,t.p2)(e)}),{retry:!0})}},73721:function(e,n,i){i.d(n,{G:function(){return t}});var r=function(e){return e.Asian="asian",e.BlackOrAfricanAmerican="blackOrAfricanAmerican",e.White="white",e.HispanicLatinxOrSpanishOrigin="hispanicLatinxOrSpanishOrigin",e.AmericanIndianOrAlaskaNative="americanIndianOrAlaskaNative",e.PacificIslander="pacificIslander",e.Other="other",e.PreferNotToSay="preferNotToSay",e}(r||{}),t=[{ethnicGroupDescription:r.Asian,checked:!1,ethnicGroup:r.Asian},{ethnicGroupDescription:r.BlackOrAfricanAmerican,checked:!1,ethnicGroup:r.BlackOrAfricanAmerican},{ethnicGroupDescription:r.White,checked:!1,ethnicGroup:r.White},{ethnicGroupDescription:r.HispanicLatinxOrSpanishOrigin,checked:!1,ethnicGroup:r.HispanicLatinxOrSpanishOrigin},{ethnicGroupDescription:r.AmericanIndianOrAlaskaNative,checked:!1,ethnicGroup:r.AmericanIndianOrAlaskaNative},{ethnicGroupDescription:r.PacificIslander,checked:!1,ethnicGroup:r.PacificIslander},{ethnicGroupDescription:"",checked:!1,isInput:!0,ethnicGroup:r.Other},{ethnicGroupDescription:r.PreferNotToSay,checked:!1,ethnicGroup:r.PreferNotToSay}]}}])}});